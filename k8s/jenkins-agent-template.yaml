apiVersion: v1
kind: Pod
metadata:
  labels:
    jenkins/label: "luxe-agent"
spec:
  serviceAccountName: jenkins
  containers:
  - name: jnlp
    image: jenkins/inbound-agent:latest
    args: ['$(JENKINS_SECRET)', '$(JENKINS_AGENT_NAME)']
    env:
      - name: JENKINS_URL
        value: "http://192.168.49.2:8080/"
    tty: true
  - name: jenkins-agent
    image: israelatia/jenkins-agent:latest
    command:
      - cat
    tty: true
    volumeMounts:
      - name: docker-sock
        mountPath: /var/run/docker.sock
  volumes:
    - name: docker-sock
      hostPath:
        path: /var/run/docker.sock
